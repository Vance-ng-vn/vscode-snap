/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/(function(){var u=["vs/workbench/services/languageDetection/browser/languageDetectionSimpleWorker","require","exports","vs/base/common/stopwatch","vs/editor/common/services/editorSimpleWorker"],h=function(l){for(var s=[],a=0,d=l.length;a<d;a++)s[a]=u[l[a]];return s};define(u[0],h([1,2,3,4]),function(l,s,a,d){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.LanguageDetectionSimpleWorker=s.create=void 0;function f(g){return new i(g,null)}s.create=f;class i extends d.EditorSimpleWorker{constructor(){super(...arguments);this._loadFailed=!1}async detectLanguage(c){const r=[],n=[],e=new a.StopWatch(!0);for await(const t of this.detectLanguagesImpl(c))r.push(t.languageId),n.push(t.confidence);if(e.stop(),r.length)return this._host.fhr("sendTelemetryEvent",[r,n,e.elapsed()]),r[0]}async getModelOperations(){if(this._modelOperations)return this._modelOperations;const c=await this._host.fhr("getIndexJsUri",[]),{ModelOperations:r}=await new Promise((n,e)=>{l([c],n,e)});return this._modelOperations=new r({modelJsonLoaderFunc:async()=>{const n=await fetch(await this._host.fhr("getModelJsonUri",[]));try{return await n.json()}catch(e){const t="Failed to parse model JSON.";throw new Error(t)}},weightsLoaderFunc:async()=>await(await fetch(await this._host.fhr("getWeightsUri",[]))).arrayBuffer()}),this._modelOperations}async*detectLanguagesImpl(c){if(this._loadFailed)return;let r;try{r=await this.getModelOperations()}catch(o){console.log(o),this._loadFailed=!0;return}const n=this._getModel(c);if(!n)return;let e;try{e=await r.runModel(n.getValue())}catch(o){console.warn(o)}if(!e||e.length===0||e[0].confidence<i.expectedRelativeConfidence)return;const t=[e[0]];for(let o of e){if(o===e[0])continue;if(t[t.length-1].confidence-o.confidence>=i.expectedRelativeConfidence){for(;t.length;)yield t.shift();if(o.confidence>i.expectedRelativeConfidence){t.push(o);continue}return}else{if(o.confidence>i.expectedRelativeConfidence){t.push(o);continue}return}}}}s.LanguageDetectionSimpleWorker=i,i.expectedRelativeConfidence=.2})}).call(this);

//# sourceMappingURL=https://ticino.blob.core.windows.net/sourcemaps/83bd43bc519d15e50c4272c6cf5c1479df196a4d/core/vs/workbench/services/languageDetection/browser/languageDetectionSimpleWorker.js.map
